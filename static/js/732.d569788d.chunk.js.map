{"version":3,"file":"static/js/732.d569788d.chunk.js","mappings":"8TAQOA,EAAWC,EAAAA,EAAAA,QAEZC,EAASC,EAAAA,GAAAA,IAAH,2FAMNC,EAAKD,EAAAA,GAAAA,GAAH,kEAKFE,EAAQF,EAAAA,GAAAA,IAAH,6CAyGX,GAAeG,EAAAA,EAAAA,KArGY,WACzB,OAAgCC,EAAAA,EAAAA,KAAzBC,EAAP,EAAOA,WAAYC,EAAnB,EAAmBA,UACbC,GAAQC,EAAAA,EAAAA,KAAmB,iBAAO,CACtCC,MAAO,GACPC,OAAQ,GACRC,SAHsC,SAG7BF,GACPF,EAAME,MAAQA,CACf,EACDG,UANsC,SAM5BF,GACRH,EAAMG,OAASA,CAChB,EACGG,eACF,MAAuB,KAAhBN,EAAME,MAAe,GAArB,aAAgCF,EAAME,MAC9C,EACGK,gBACF,MAAwB,KAAjBP,EAAMG,OAAgB,GAAtB,aAAiCH,EAAMG,OAC/C,EACGK,cAAW,IAAD,EACZ,OAAiB,OAAVV,QAAU,IAAVA,GAAA,UAAAA,EAAYW,kBAAZ,eAAwBC,WAAWC,IAAID,WAAWC,KAAM,gBAAkBX,EAAMM,SAAWN,EAAMO,SACzG,EAjB8B,IAyB3BK,EAAqB,CACzBC,KAAM,OACNC,gBAAgB,EAChBC,aAHyB,SAGZC,GACX,MAA8B,KAA1BjB,EAAUkB,aACZC,EAAAA,GAAAA,QAAgB,oDAAYC,QACrB,IAETrB,EAAWsB,QAAQJ,GACnBlB,EAAWuB,YAAYL,EAAKH,MACvB,wCAAwCS,KAAKN,EAAKO,MAInDP,EAAKQ,KAAO,SACdN,EAAAA,GAAAA,MAAc,mEAAiBC,QACxB,IAETrB,EAAW2B,SACRN,MAAK,WACJD,EAAAA,GAAAA,QAAgB,4BAAQC,MACzB,IACAO,OAAM,kBAAMR,EAAAA,GAAAA,MAAc,4BAAQC,MAA5B,KACF,IAZLD,EAAAA,GAAAA,MAAc,8EAAiCC,QACxC,GAYV,GAGH,OACE,iCACE,SAAC,IAAD,CAAMQ,IAAI,qBAAMC,SAAU9B,EAAW+B,YAArC,UACE,UAACvC,GAAD,kBAAasB,GAAb,eACE,cAAGkB,UAAU,uBAAb,UACE,SAACC,EAAA,EAAD,CAAeC,OAAO,YAExB,cAAGF,UAAU,kBAAb,mGAGA,cAAGA,UAAU,kBAAb,+HAMFhC,EAAWW,YAAcX,EAAWW,WAAWC,WAAWuB,UAAW,UAACzC,EAAD,YACnE,SAACE,EAAD,wCACA,2BACE,4DACA,yBAAI,cAAGwC,OAAO,SACPC,KAAMrC,EAAWW,WAAWC,WAAWC,IAAID,WAAWC,IACtDyB,IAAI,aAFP,SAEqBtC,EAAWW,WAAWC,WAAWC,IAAID,WAAWC,SAEzE,sDACA,wBAAKb,EAAWmC,YAChB,4DACA,yBACE,SAACtC,EAAD,CAAO0C,IAAKvC,EAAWW,WAAWC,WAAWC,IAAID,WAAWC,IAAK2B,IAAI,QAEvE,kEACA,yBACE,UAAC,IAAD,CAAOC,UAAU,aAAjB,WACE,SAAC,IAAD,CAAOC,YAAY,eAAKC,WAAW,KAAKC,YAAY,2EAAeC,YAAU,EACtEC,SAnED,SAACC,GACnB7C,EAAMI,SAASyC,EAAEX,OAAOY,MACzB,KAkEa,SAAC,IAAD,CAAON,YAAY,eAAKC,WAAW,KAAKC,YAAY,2EAAeC,YAAU,EAACC,SAjEvE,SAACC,GACpB7C,EAAMK,UAAUwC,EAAEX,OAAOY,MAC1B,UAkES,oFACA,yBAAI,cAAGZ,OAAO,SAASC,KAAMnC,EAAMQ,QAAS4B,IAAI,aAA5C,SAA0DpC,EAAMQ,kBAE5D,OAInB,ICnHKuC,EAAUtD,EAAAA,GAAAA,IAAH,iIAkBb,GAAeG,EAAAA,EAAAA,KAVF,SAAC,GAA2B,IAA1BoD,EAAyB,EAAzBA,SACNjD,GAAaF,EAAAA,EAAAA,KAAbE,UACP,OACE,8BACGA,EAAUkB,YAAc,MAAO,SAAC8B,EAAD,UAAUC,KAI/C,ICXD,GAAepD,EAAAA,EAAAA,KATQ,WACrB,OACE,iCACE,SAAC,EAAD,4EACA,SAAC,EAAD,MAGL,G","sources":["components/Uploader.tsx","components/Tips.tsx","pages/Home.tsx"],"sourcesContent":["import React from 'react';\r\nimport {useStores} from '../stores';\r\nimport {message, Upload, Input, Space, Spin} from 'antd';\r\nimport type {UploadProps} from 'antd';\r\nimport {InboxOutlined} from '@ant-design/icons';\r\nimport {observer, useLocalObservable} from 'mobx-react';\r\nimport styled from 'styled-components';\r\n\r\nconst {Dragger} = Upload;\r\n\r\nconst Result = styled.div`\r\n  margin-top: 10px;\r\n  border: 1px dashed #ccc;\r\n  padding: 20px;\r\n`;\r\n\r\nconst H1 = styled.h1`\r\n  margin: 20px 0;\r\n  text-align: center;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  max-width: 300px;\r\n`;\r\n\r\nconst Uploader: React.FC = () => {\r\n  const {ImageStore, UserStore} = useStores();\r\n  const store = useLocalObservable(() => ({\r\n    width: '',\r\n    height: '',\r\n    setWidth(width: string) {\r\n      store.width = width;\r\n    },\r\n    setHeight(height: string) {\r\n      store.height = height;\r\n    },\r\n    get widthStr() {\r\n      return store.width === '' ? '' : `/w/${store.width}`;\r\n    },\r\n    get heightStr() {\r\n      return store.height === '' ? '' : `/h/${store.height}`;\r\n    },\r\n    get fullStr() {\r\n      return ImageStore?.serverFile?.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr;\r\n    }\r\n  }));\r\n  const changeWidth = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    store.setWidth(e.target.value);\r\n  };\r\n  const changeHeight = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    store.setHeight(e.target.value);\r\n  };\r\n  const props: UploadProps = {\r\n    name: 'file',\r\n    showUploadList: false,\r\n    beforeUpload(file) {\r\n      if (UserStore.currentUser === '') {\r\n        message.warning('请先登录再上传！').then();\r\n        return false;\r\n      }\r\n      ImageStore.setFile(file);\r\n      ImageStore.setFilename(file.name);\r\n      if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\r\n        message.error('只能上传png/svg/jpg/jpeg/gif格式的图片').then();\r\n        return false;\r\n      }\r\n      if (file.size > 1024 * 1024) {\r\n        message.error('仅支持上传小于1MB的图片').then();\r\n        return false;\r\n      }\r\n      ImageStore.upload()\r\n        .then(() => {\r\n          message.success('上传成功').then();\r\n        })\r\n        .catch(() => message.error('上传失败').then());\r\n      return false;\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Spin tip=\"上传中\" spinning={ImageStore.isUploading}>\r\n        <Dragger {...props}>\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <InboxOutlined accept=\".png\"/>\r\n          </p>\r\n          <p className=\"ant-upload-text\">\r\n            点击或将文件拖拽至此处以上传\r\n          </p>\r\n          <p className=\"ant-upload-hint\">\r\n            仅支持png/svg/jpg/jpeg/gif格式的图片，最大不超过1MB\r\n          </p>\r\n        </Dragger>\r\n      </Spin>\r\n      {\r\n        ImageStore.serverFile && ImageStore.serverFile.attributes.filename ? <Result>\r\n          <H1>上传结果</H1>\r\n          <dl>\r\n            <dt>图片地址：</dt>\r\n            <dd><a target=\"_blank\"\r\n                   href={ImageStore.serverFile.attributes.url.attributes.url}\r\n                   rel=\"noreferrer\">{ImageStore.serverFile.attributes.url.attributes.url}</a>\r\n            </dd>\r\n            <dt>文件名：</dt>\r\n            <dd>{ImageStore.filename}</dd>\r\n            <dt>图片预览：</dt>\r\n            <dd>\r\n              <Image src={ImageStore.serverFile.attributes.url.attributes.url} alt=\"\"/>\r\n            </dd>\r\n            <dt>自定义尺寸：</dt>\r\n            <dd>\r\n              <Space direction=\"horizontal\">\r\n                <Input addonBefore=\"宽度\" addonAfter=\"px\" placeholder=\"输入自定义的宽度（可选）\" allowClear\r\n                       onChange={changeWidth}/>\r\n                <Input addonBefore=\"高度\" addonAfter=\"px\" placeholder=\"输入自定义的高度（可选）\" allowClear onChange={changeHeight}/>\r\n              </Space>\r\n            </dd>\r\n            <dt>处理后的图片地址：</dt>\r\n            <dd><a target=\"_blank\" href={store.fullStr} rel=\"noreferrer\">{store.fullStr}</a></dd>\r\n          </dl>\r\n        </Result> : null\r\n      }\r\n    </>\r\n  );\r\n};\r\n\r\nexport default observer(Uploader);","import React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport {useStores} from '../stores';\r\nimport styled from 'styled-components';\r\n\r\ntype TipsProps = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nconst TipsDiv = styled.div`\r\n  background: orange;\r\n  padding: 10px;\r\n  margin-bottom: 30px;\r\n  color: white;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst Tips = ({children}: TipsProps) => {\r\n  const {UserStore} = useStores();\r\n  return (\r\n    <>\r\n      {UserStore.currentUser ? null : <TipsDiv>{children}</TipsDiv>}\r\n    </>\r\n\r\n  );\r\n};\r\n\r\nexport default observer(Tips);","import {observer} from 'mobx-react';\r\nimport Uploader from '../components/Uploader';\r\nimport React from 'react';\r\nimport Tips from '../components/Tips';\r\n\r\nconst Home: React.FC = () => {\r\n  return (\r\n    <>\r\n      <Tips>请登录后再进行上传！</Tips>\r\n      <Uploader/>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default observer(Home);\r\n\r\n"],"names":["Dragger","Upload","Result","styled","H1","Image","observer","useStores","ImageStore","UserStore","store","useLocalObservable","width","height","setWidth","setHeight","widthStr","heightStr","fullStr","serverFile","attributes","url","props","name","showUploadList","beforeUpload","file","currentUser","message","then","setFile","setFilename","test","type","size","upload","catch","tip","spinning","isUploading","className","InboxOutlined","accept","filename","target","href","rel","src","alt","direction","addonBefore","addonAfter","placeholder","allowClear","onChange","e","value","TipsDiv","children"],"sourceRoot":""}