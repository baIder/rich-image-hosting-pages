"use strict";(self.webpackChunkrich_image_hosting=self.webpackChunkrich_image_hosting||[]).push([[732],{5732:function(e,r,n){n.r(r),n.d(r,{default:function(){return U}});var t,i,l,s,d=n(9023),a=n(1413),h=n(168),c=(n(2791),n(7530)),u=n(9553),o=n(3775),g=n(7083),x=n(3099),p=n(8678),j=n(6776),f=n(32),m=n(6444),v=n(184),Z=u.Z.Dragger,b=m.ZP.div(t||(t=(0,h.Z)(["\n  margin-top: 10px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n"]))),w=m.ZP.h1(i||(i=(0,h.Z)(["\n  margin: 20px 0;\n  text-align: center;\n"]))),P=m.ZP.img(l||(l=(0,h.Z)(["\n  max-width: 300px;\n"]))),F=(0,d.Pi)((function(){var e=(0,c.m)(),r=e.ImageStore,n=e.UserStore,t=(0,f.fv)((function(){return{width:"",height:"",setWidth:function(e){t.width=e},setHeight:function(e){t.height=e},get widthStr(){return""===t.width?"":"/w/".concat(t.width)},get heightStr(){return""===t.height?"":"/h/".concat(t.height)},get fullStr(){var e;return(null===r||void 0===r||null===(e=r.serverFile)||void 0===e?void 0:e.attributes.url.attributes.url)+"?imageView2/0"+t.widthStr+t.heightStr}}})),i={name:"file",showUploadList:!1,beforeUpload:function(e){return""===n.currentUser?(o.ZP.warning("\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20\uff01").then(),!1):(r.setFile(e),r.setFilename(e.name),/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/gi.test(e.type)?e.size>1048576?(o.ZP.error("\u4ec5\u652f\u6301\u4e0a\u4f20\u5c0f\u4e8e1MB\u7684\u56fe\u7247").then(),!1):(r.upload().then((function(){o.ZP.success("\u4e0a\u4f20\u6210\u529f").then()})).catch((function(){return o.ZP.error("\u4e0a\u4f20\u5931\u8d25").then()})),!1):(o.ZP.error("\u53ea\u80fd\u4e0a\u4f20png/svg/jpg/jpeg/gif\u683c\u5f0f\u7684\u56fe\u7247").then(),!1))}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.Z,{tip:"\u4e0a\u4f20\u4e2d",spinning:r.isUploading,children:(0,v.jsxs)(Z,(0,a.Z)((0,a.Z)({},i),{},{children:[(0,v.jsx)("p",{className:"ant-upload-drag-icon",children:(0,v.jsx)(j.Z,{accept:".png"})}),(0,v.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u5c06\u6587\u4ef6\u62d6\u62fd\u81f3\u6b64\u5904\u4ee5\u4e0a\u4f20"}),(0,v.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301png/svg/jpg/jpeg/gif\u683c\u5f0f\u7684\u56fe\u7247\uff0c\u6700\u5927\u4e0d\u8d85\u8fc71MB"})]}))}),r.serverFile&&r.serverFile.attributes.filename?(0,v.jsxs)(b,{children:[(0,v.jsx)(w,{children:"\u4e0a\u4f20\u7ed3\u679c"}),(0,v.jsxs)("dl",{children:[(0,v.jsx)("dt",{children:"\u56fe\u7247\u5730\u5740\uff1a"}),(0,v.jsx)("dd",{children:(0,v.jsx)("a",{target:"_blank",href:r.serverFile.attributes.url.attributes.url,rel:"noreferrer",children:r.serverFile.attributes.url.attributes.url})}),(0,v.jsx)("dt",{children:"\u6587\u4ef6\u540d\uff1a"}),(0,v.jsx)("dd",{children:r.filename}),(0,v.jsx)("dt",{children:"\u56fe\u7247\u9884\u89c8\uff1a"}),(0,v.jsx)("dd",{children:(0,v.jsx)(P,{src:r.serverFile.attributes.url.attributes.url,alt:""})}),(0,v.jsx)("dt",{children:"\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff1a"}),(0,v.jsx)("dd",{children:(0,v.jsxs)(x.Z,{direction:"horizontal",children:[(0,v.jsx)(p.Z,{addonBefore:"\u5bbd\u5ea6",addonAfter:"px",placeholder:"\u8f93\u5165\u81ea\u5b9a\u4e49\u7684\u5bbd\u5ea6\uff08\u53ef\u9009\uff09",allowClear:!0,onChange:function(e){t.setWidth(e.target.value)}}),(0,v.jsx)(p.Z,{addonBefore:"\u9ad8\u5ea6",addonAfter:"px",placeholder:"\u8f93\u5165\u81ea\u5b9a\u4e49\u7684\u9ad8\u5ea6\uff08\u53ef\u9009\uff09",allowClear:!0,onChange:function(e){t.setHeight(e.target.value)}})]})}),(0,v.jsx)("dt",{children:"\u5904\u7406\u540e\u7684\u56fe\u7247\u5730\u5740\uff1a"}),(0,v.jsx)("dd",{children:(0,v.jsx)("a",{target:"_blank",href:t.fullStr,rel:"noreferrer",children:t.fullStr})})]})]}):null]})})),S=m.ZP.div(s||(s=(0,h.Z)(["\n  background: orange;\n  padding: 10px;\n  margin-bottom: 30px;\n  color: white;\n  border-radius: 4px;\n"]))),k=(0,d.Pi)((function(e){var r=e.children,n=(0,c.m)().UserStore;return(0,v.jsx)(v.Fragment,{children:n.currentUser?null:(0,v.jsx)(S,{children:r})})})),U=(0,d.Pi)((function(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k,{children:"\u8bf7\u767b\u5f55\u540e\u518d\u8fdb\u884c\u4e0a\u4f20\uff01"}),(0,v.jsx)(F,{})]})}))}}]);
//# sourceMappingURL=732.d569788d.chunk.js.map